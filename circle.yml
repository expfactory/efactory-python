machine:
  environment:
    TEST_RUN_FOLDER: /tmp

test:
  override:
    - export PATH=$HOME/miniconda2/bin:\\$PATH && bash expfactory/testing/run_tests.sh $PWD/expfactory/testing $TEST_RUN_FOLDER
    - export PATH=$HOME/miniconda3/bin:\\$PATH && bash expfactory/testing/run_tests.sh $PWD/expfactory/testing $TEST_RUN_FOLDER

dependencies:
  pre:
    - echo "The Experiment Factory!"
    - wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda3.sh
    - wget https://repo.continuum.io/miniconda/Miniconda2-latest-Linux-x86_64.sh -O miniconda2.sh
    - chmod +x miniconda3.sh
    - chmod +x miniconda3.sh
    - ./miniconda2.sh -b
    - ./miniconda3.sh -b
    - $HOME/miniconda2/bin/conda update --yes conda
    - $HOME/miniconda3/bin/conda update --yes conda
    - $HOME/miniconda2/bin/pip install setuptools
    - $HOME/miniconda2/bin/conda install --yes pip numpy nose pandas numexpr scipy matplotlib
    - $HOME/miniconda2/bin/pip install flask flask-restful gitpython selenium cognitiveatlas seaborn
    - $HOME/miniconda2/bin/conda install --yes -c dan_blanchard python-coveralls
    - $HOME/miniconda3/bin/pip install setuptools
    - $HOME/miniconda3/bin/conda install --yes pip numpy nose pandas numexpr scipy matplotlib
    - $HOME/miniconda3/bin/pip install flask flask-restful gitpython selenium cognitiveatlas seaborn
    - $HOME/miniconda3/bin/conda install --yes -c dan_blanchard python-coveralls
